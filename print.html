<!DOCTYPE HTML>
<html lang="en" class="latte sidebar-visible" dir="ltr">
    <head>
        <!-- Book generated using mdBook -->
        <meta charset="UTF-8">
        <title>XmlMan documentation</title>
        <meta name="robots" content="noindex">


        <!-- Custom HTML head -->

        <meta name="description" content="">
        <meta name="viewport" content="width=device-width, initial-scale=1">
        <meta name="theme-color" content="#ffffff">

        <link rel="icon" href="favicon.svg">
        <link rel="shortcut icon" href="favicon.png">
        <link rel="stylesheet" href="css/variables.css">
        <link rel="stylesheet" href="css/general.css">
        <link rel="stylesheet" href="css/chrome.css">
        <link rel="stylesheet" href="css/print.css" media="print">

        <!-- Fonts -->
        <link rel="stylesheet" href="FontAwesome/css/font-awesome.css">
        <link rel="stylesheet" href="fonts/fonts.css">

        <!-- Highlight.js Stylesheets -->
        <link rel="stylesheet" id="highlight-css" href="highlight.css">
        <link rel="stylesheet" id="tomorrow-night-css" href="tomorrow-night.css">
        <link rel="stylesheet" id="ayu-highlight-css" href="ayu-highlight.css">

        <!-- Custom theme stylesheets -->
        <link rel="stylesheet" href="./theme/catppuccin.css">
        <link rel="stylesheet" href="./theme/ewwii.css">


        <!-- Provide site root and default themes to javascript -->
        <script>
            const path_to_root = "";
            const default_light_theme = "latte";
            const default_dark_theme = "ewwii";
            window.path_to_searchindex_js = "searchindex.js";
        </script>
        <!-- Start loading toc.js asap -->
        <script src="toc.js"></script>
    </head>
    <body>
    <div id="mdbook-help-container">
        <div id="mdbook-help-popup">
            <h2 class="mdbook-help-title">Keyboard shortcuts</h2>
            <div>
                <p>Press <kbd>←</kbd> or <kbd>→</kbd> to navigate between chapters</p>
                <p>Press <kbd>S</kbd> or <kbd>/</kbd> to search in the book</p>
                <p>Press <kbd>?</kbd> to show this help</p>
                <p>Press <kbd>Esc</kbd> to hide this help</p>
            </div>
        </div>
    </div>
    <div id="body-container">
        <!-- Work around some values being stored in localStorage wrapped in quotes -->
        <script>
            try {
                let theme = localStorage.getItem('mdbook-theme');
                let sidebar = localStorage.getItem('mdbook-sidebar');

                if (theme.startsWith('"') && theme.endsWith('"')) {
                    localStorage.setItem('mdbook-theme', theme.slice(1, theme.length - 1));
                }

                if (sidebar.startsWith('"') && sidebar.endsWith('"')) {
                    localStorage.setItem('mdbook-sidebar', sidebar.slice(1, sidebar.length - 1));
                }
            } catch (e) { }
        </script>

        <!-- Set the theme before any content is loaded, prevents flash -->
        <script>
            const default_theme = window.matchMedia("(prefers-color-scheme: dark)").matches ? default_dark_theme : default_light_theme;
            let theme;
            try { theme = localStorage.getItem('mdbook-theme'); } catch(e) { }
            if (theme === null || theme === undefined) { theme = default_theme; }
            const html = document.documentElement;
            html.classList.remove('latte')
            html.classList.add(theme);
            html.classList.add("js");
        </script>

        <input type="checkbox" id="sidebar-toggle-anchor" class="hidden">

        <!-- Hide / unhide sidebar before it is displayed -->
        <script>
            let sidebar = null;
            const sidebar_toggle = document.getElementById("sidebar-toggle-anchor");
            if (document.body.clientWidth >= 1080) {
                try { sidebar = localStorage.getItem('mdbook-sidebar'); } catch(e) { }
                sidebar = sidebar || 'visible';
            } else {
                sidebar = 'hidden';
                sidebar_toggle.checked = false;
            }
            if (sidebar === 'visible') {
                sidebar_toggle.checked = true;
            } else {
                html.classList.remove('sidebar-visible');
            }
        </script>

        <nav id="sidebar" class="sidebar" aria-label="Table of contents">
            <!-- populated by js -->
            <mdbook-sidebar-scrollbox class="sidebar-scrollbox"></mdbook-sidebar-scrollbox>
            <noscript>
                <iframe class="sidebar-iframe-outer" src="toc.html"></iframe>
            </noscript>
            <div id="sidebar-resize-handle" class="sidebar-resize-handle">
                <div class="sidebar-resize-indicator"></div>
            </div>
        </nav>

        <div id="page-wrapper" class="page-wrapper">

            <div class="page">
                <div id="menu-bar-hover-placeholder"></div>
                <div id="menu-bar" class="menu-bar sticky">
                    <div class="left-buttons">
                        <label id="sidebar-toggle" class="icon-button" for="sidebar-toggle-anchor" title="Toggle Table of Contents" aria-label="Toggle Table of Contents" aria-controls="sidebar">
                            <i class="fa fa-bars"></i>
                        </label>
                        <button id="theme-toggle" class="icon-button" type="button" title="Change theme" aria-label="Change theme" aria-haspopup="true" aria-expanded="false" aria-controls="theme-list">
                            <i class="fa fa-paint-brush"></i>
                        </button>
                        <ul id="theme-list" class="theme-popup" aria-label="Themes" role="menu">
                            <li role="none"><button role="menuitem" class="theme" id="default_theme">Auto</button></li>
                            <li role="none"><button role="menuitem" class="theme" id="light">Light</button></li>
                            <li role="none"><button role="menuitem" class="theme" id="rust">Rust</button></li>
                            <li role="none"><button role="menuitem" class="theme" id="coal">Coal</button></li>
                            <li role="none"><button role="menuitem" class="theme" id="navy">Navy</button></li>
                            <li role="none"><button role="menuitem" class="theme" id="ayu">Ayu</button></li>
                            <li role="none"><button role="menuitem" class="theme" id="latte">Latte</button></li>
                            <li role="none"><button role="menuitem" class="theme" id="frappe">Frappé</button></li>
                            <li role="none"><button role="menuitem" class="theme" id="macchiato">Macchiato</button></li>
                            <li role="none"><button role="menuitem" class="theme" id="mocha">Mocha</button></li>
                            <li role="none"><button role="menuitem" class="theme" id="ewwii">Ewwii</button></li>
                        </ul>
                        <button id="search-toggle" class="icon-button" type="button" title="Search (`/`)" aria-label="Toggle Searchbar" aria-expanded="false" aria-keyshortcuts="/ s" aria-controls="searchbar">
                            <i class="fa fa-search"></i>
                        </button>
                    </div>

                    <h1 class="menu-title">XmlMan documentation</h1>

                    <div class="right-buttons">
                        <a href="print.html" title="Print this book" aria-label="Print this book">
                            <i id="print-button" class="fa fa-print"></i>
                        </a>
                        <a href="https://github.com/Ewwii-sh/ewwii" title="Git repository" aria-label="Git repository">
                            <i id="git-repository-button" class="fa fa-github"></i>
                        </a>

                    </div>
                </div>

                <div id="search-wrapper" class="hidden">
                    <form id="searchbar-outer" class="searchbar-outer">
                        <div class="search-wrapper">
                            <input type="search" id="searchbar" name="searchbar" placeholder="Search this book ..." aria-controls="searchresults-outer" aria-describedby="searchresults-header">
                            <div class="spinner-wrapper">
                                <i class="fa fa-spinner fa-spin"></i>
                            </div>
                        </div>
                    </form>
                    <div id="searchresults-outer" class="searchresults-outer hidden">
                        <div id="searchresults-header" class="searchresults-header"></div>
                        <ul id="searchresults">
                        </ul>
                    </div>
                </div>

                <!-- Apply ARIA attributes after the sidebar and the sidebar toggle button are added to the DOM -->
                <script>
                    document.getElementById('sidebar-toggle').setAttribute('aria-expanded', sidebar === 'visible');
                    document.getElementById('sidebar').setAttribute('aria-hidden', sidebar !== 'visible');
                    Array.from(document.querySelectorAll('#sidebar a')).forEach(function(link) {
                        link.setAttribute('tabIndex', sidebar === 'visible' ? 0 : -1);
                    });
                </script>

                <div id="content" class="content">
                    <main>
                        <h1 id="introduction"><a class="header" href="#introduction">Introduction</a></h1>
<p><strong>XmlMan</strong> is an elegant XML-to-Rhai transpiler for Ewwii, designed to make UI definitions and data structures concise, expressive, and scriptable. It combines the readability of XML with the flexibility of Rhai scripting, giving you precise error reporting without the struggle of Ewwii's Rahi API's.</p>
<div style="break-before: page; page-break-before: always;"></div><h1 id="configuring"><a class="header" href="#configuring">Configuring</a></h1>
<p>Making a configuration with <code>XmlMan</code> is really easy and straightforward due to the declarative style of xml.</p>
<p>Just define what the UI looks like, and you will be done!</p>
<h2 id="prerequisites"><a class="header" href="#prerequisites">Prerequisites</a></h2>
<p>Before using <code>XmlMan</code>, you should have a <strong>basic understanding of XML</strong>, its structure, tags, and attributes. This documentation assumes you're already familiar with these concepts and focuses on how <code>XmlMan</code> extends or interacts with them.</p>
<p>If you're completely new to XML, it's worth exploring some tutorials or online resources to get a foundational grasp. Understanding XML will help you navigate <code>XmlMan</code> more effectively and avoid confusion.</p>
<h2 id="basic-setup"><a class="header" href="#basic-setup">Basic Setup</a></h2>
<pre><code class="language-xml">&lt;!-- The &lt;Root&gt; element is important! --&gt;
&lt;Root&gt;
    &lt;Window name="Foo"&gt;
        &lt;Label text="boo"/&gt;
    &lt;/Window&gt;
&lt;/Root&gt;
</code></pre>
<p>Let's analyze the above config.</p>
<p>At the top of this example, we can see a <code>&lt;Root&gt;</code> element (see <a href="config/./rules#rule-1---use-a-root-element">rules#rule-1</a>) in which is a wrapper that <strong>contains your configuration</strong>. It is a mandotary requirement as xml can't handle multiple widgets at the top level.</p>
<p>And inside the root, we can see a <code>&lt;Window&gt;</code> element. This element is basically an application window to which you can add widgets to. And the <code>&lt;Label&gt;</code> element inside the window is a label widget which shows up inside our window when its opened.</p>
<div style="break-before: page; page-break-before: always;"></div><h1 id="configuration-rules"><a class="header" href="#configuration-rules">Configuration Rules</a></h1>
<p>These rules ensure that the structure and logic of your configuration remain flexible, safe, and prone to less runtime errors.</p>
<p>Currently there are only 2 rules, but as <code>XmlMan</code> matures, many more rules may appear.</p>
<h2 id="rule-1---use-a-root-element"><a class="header" href="#rule-1---use-a-root-element">Rule 1 - Use a <code>&lt;Root&gt;</code> Element</a></h2>
<p>Always wrap all widgets and configuration elements within a single <code>&lt;Root&gt;</code> element. This safely aligns with ewwii's model and also allows having multiple elements in a configuration because in xml, we may only have root 1 element.</p>
<pre><code class="language-xml">&lt;Root&gt;
    &lt;Window name="1"&gt;
        &lt;!-- ... --&gt;
    &lt;/Window&gt;

    &lt;Window name="2"&gt;
        &lt;!-- ... --&gt;
    &lt;/Window&gt;
&lt;/Root&gt;
</code></pre>
<h2 id="rule-2---avoid-orphaned-polllisten-handlers"><a class="header" href="#rule-2---avoid-orphaned-polllisten-handlers">Rule 2 - Avoid Orphaned Poll/Listen Handlers</a></h2>
<p>Poll and Listen handlers must always be defined at the root level and not within other widgets like <code>&lt;Box&gt;</code> or <code>&lt;Window&gt;</code>. Ewwii ignores orphaned handlers but <code>XmlMan</code> rejects it directly for safe configuration.</p>
<pre><code class="language-xml">&lt;Root&gt;
    &lt;!-- valid --&gt;
    &lt;Poll var="valid"&gt;&lt;/Poll&gt;
    &lt;Window name="1"&gt;
        &lt;Box&gt;
            &lt;!-- orphan --&gt;
            &lt;Poll var="orphan"&gt;&lt;/Poll&gt;
        &lt;/Box&gt;
    &lt;/Window&gt;
&lt;/Root&gt;
</code></pre>
<div style="break-before: page; page-break-before: always;"></div><h1 id="widget-api"><a class="header" href="#widget-api">Widget API</a></h1>
<h3 id="top-level"><a class="header" href="#top-level">Top Level</a></h3>
<ul>
<li>
<p><strong>defwindow</strong>
<code>&lt;Window&gt;&lt;/Window&gt;</code></p>
</li>
<li>
<p><strong>poll</strong>
<code>&lt;Poll&gt;&lt;/Poll&gt;</code></p>
</li>
<li>
<p><strong>listen</strong>
<code>&lt;Listen&gt;&lt;/Listen&gt;</code></p>
</li>
</ul>
<h3 id="containers"><a class="header" href="#containers">Containers</a></h3>
<ul>
<li>
<p><strong>box</strong>
<code>&lt;Box&gt;&lt;/Box&gt;</code></p>
</li>
<li>
<p><strong>centerbox</strong>
<code>&lt;CenterBox&gt;&lt;/CenterBox&gt;</code></p>
</li>
<li>
<p><strong>eventbox</strong>
<code>&lt;EventBox&gt;&lt;/EventBox&gt;</code></p>
</li>
<li>
<p><strong>overlay</strong>
<code>&lt;Overlay&gt;&lt;/Overlay&gt;</code></p>
</li>
<li>
<p><strong>stack</strong>
<code>&lt;Stack&gt;&lt;/Stack&gt;</code></p>
</li>
</ul>
<h3 id="controls"><a class="header" href="#controls">Controls</a></h3>
<ul>
<li>
<p><strong>button</strong>
<code>&lt;Button&gt;&lt;/Button&gt;</code></p>
</li>
<li>
<p><strong>slider</strong>
<code>&lt;Slider&gt;&lt;/Slider&gt;</code></p>
</li>
<li>
<p><strong>input</strong>
<code>&lt;Input&gt;&lt;/Input&gt;</code></p>
</li>
<li>
<p><strong>checkbox</strong>
<code>&lt;CheckBox&gt;&lt;/CheckBox&gt;</code></p>
</li>
<li>
<p><strong>color_button</strong>
<code>&lt;ColorButton&gt;&lt;/ColorButton&gt;</code></p>
</li>
<li>
<p><strong>color_chooser</strong>
<code>&lt;ColorChooser&gt;&lt;/ColorChooser&gt;</code></p>
</li>
<li>
<p><strong>combo_box_text</strong>
<code>&lt;ComboBoxText&gt;&lt;/ComboBoxText&gt;</code></p>
</li>
</ul>
<h3 id="feedback--display"><a class="header" href="#feedback--display">Feedback &amp; Display</a></h3>
<ul>
<li>
<p><strong>tooltip</strong>
<code>&lt;ToolTip&gt;&lt;/ToolTip&gt;</code></p>
</li>
<li>
<p><strong>progress</strong>
<code>&lt;Progress&gt;&lt;/Progress&gt;</code></p>
</li>
<li>
<p><strong>circular_progress</strong>
<code>&lt;CircularProgress&gt;&lt;/CircularProgress&gt;</code></p>
</li>
<li>
<p><strong>graph</strong>
<code>&lt;Graph&gt;&lt;/Graph&gt;</code></p>
</li>
<li>
<p><strong>image</strong>
<code>&lt;Image&gt;&lt;/Image&gt;</code></p>
</li>
<li>
<p><strong>label</strong>
<code>&lt;Label&gt;&lt;/Label&gt;</code></p>
</li>
<li>
<p><strong>calendar</strong>
<code>&lt;Calendar&gt;&lt;/Calendar&gt;</code></p>
</li>
</ul>
<h3 id="layout--behavior"><a class="header" href="#layout--behavior">Layout &amp; Behavior</a></h3>
<ul>
<li>
<p><strong>transform</strong>
<code>&lt;Transform&gt;&lt;/Transform&gt;</code></p>
</li>
<li>
<p><strong>revealer</strong>
<code>&lt;Revealer&gt;&lt;/Revealer&gt;</code></p>
</li>
<li>
<p><strong>scroll</strong>
<code>&lt;Scroll&gt;&lt;/Scroll&gt;</code></p>
</li>
<li>
<p><strong>expander</strong>
<code>&lt;Expander&gt;&lt;/Expander&gt;</code></p>
</li>
</ul>
<div style="break-before: page; page-break-before: always;"></div><h1 id="expressions"><a class="header" href="#expressions">Expressions</a></h1>
<p>Expressions are one of the most important concepts in xmlman which makes it more flexible.</p>
<div style="break-before: page; page-break-before: always;"></div><h1 id="expressions-1"><a class="header" href="#expressions-1">Expressions</a></h1>
<p><strong>XmlMan</strong> supports writing Rhai expressions inside strings. This is both a powerful feature and a potential weakness.</p>
<h2 id="why-its-a-superpower"><a class="header" href="#why-its-a-superpower">Why it's a superpower</a></h2>
<p>This feature allows <strong>XmlMan</strong> to be dynamic rather than purely static, giving you more flexibility.</p>
<h2 id="why-its-a-weakness"><a class="header" href="#why-its-a-weakness">Why it's a weakness</a></h2>
<p>It’s a weakness because it allows arbitrary Rhai code. <strong>XmlMan</strong> cannot validate these expressions at parse time, so they may cause errors during runtime.</p>
<h2 id="how-to-use-expressions"><a class="header" href="#how-to-use-expressions">How to use expressions</a></h2>
<p>Expressions are written inside <code>${}</code>.</p>
<p>Example:</p>
<pre><code class="language-xml">&lt;?xml version="1.0" encoding="UTF-8"?&gt;

&lt;Root&gt;
    &lt;Window name="Banana"&gt;
        &lt;Box&gt;
            &lt;!-- The expression inside ${} is a Rhai expression --&gt;
            &lt;Label text="${2 + 2}"/&gt;
        &lt;/Box&gt;
    &lt;/Window&gt;
&lt;/Root&gt;
</code></pre>
<div style="break-before: page; page-break-before: always;"></div><h1 id="special-expression-no_quote"><a class="header" href="#special-expression-no_quote">Special Expression: <code>@no_quote</code></a></h1>
<p><code>XmlMan</code> provides a special expression called <code>@no_quote</code> that allows you to assign <strong>non-string values</strong> (like booleans, integers, or other raw data) to element attributes. Normally, attribute values are wrapped in quotes and interpreted as strings. Using <code>@no_quote</code> tells the transpiler <strong>not</strong> to quote the value.</p>
<h3 id="how-it-works"><a class="header" href="#how-it-works">How It Works</a></h3>
<p>In <code>XmlMan</code>, XML attributes are normally <strong>always quoted</strong>, which means values are treated as strings. Sometimes, you want to assign <strong>raw values</strong> like booleans or numbers (without quotes). The <code>@no_quote</code> expression makes this possible.</p>
<h4 id="xml-example"><a class="header" href="#xml-example">XML Example</a></h4>
<pre><code class="language-xml">&lt;?xml version="1.0" encoding="UTF-8"?&gt;

&lt;Root&gt;
    &lt;Window name="Banana"&gt;
        &lt;Box&gt;
            &lt;!-- @no_quote(false) ensures this is a boolean, not a string --&gt;
            &lt;Label text="foo" visible="@no_quote(false)"/&gt;
        &lt;/Box&gt;
    &lt;/Window&gt;
&lt;/Root&gt;
</code></pre>
<p>Here, <code>visible="@no_quote(false)"</code> assigns a <strong>boolean <code>false</code></strong> instead of the string <code>`false`</code>.</p>
<h4 id="transpiled-rhai-code"><a class="header" href="#transpiled-rhai-code">Transpiled Rhai Code</a></h4>
<p>When the above XML is transpiled, it produces the following Rhai code:</p>
<pre><code class="language-js">fn Banana_child() {
    box(#{}, [
      label(#{
        "text": `foo`, // string
        "visible": false // boolean
      })
    ])
}

enter([
    defwindow("Banana", #{  }, Banana_child())
])
</code></pre>
<blockquote>
<p><strong>Important</strong></p>
<p>If you write <code>@no_quote(val) some_other_val</code>, the engine will <strong>still</strong> wrap the entire value in quotes. Only the direct use of <code>@no_quote(val)</code> ensures the value remains unquoted.</p>
</blockquote>
<blockquote>
<p><strong>Caution</strong></p>
<p>When using <code>@no_quote</code>, <code>XmlMan</code> cannot guarantee that the resulting code is valid. Make sure the values you pass are appropriate for the context.</p>
</blockquote>
<div style="break-before: page; page-break-before: always;"></div><h1 id="errors"><a class="header" href="#errors">Errors</a></h1>
<p>Errors are one of the main reasons why you should use <strong>XmlMan</strong>. It uses the <a href="https://github.com/zesterer/ariadne/">ariadne crate</a> to output pretty errors that everyone can understand.</p>
<p><strong>Here is an example error:</strong></p>
<p><img src="assets/xmlman_error.png" alt="XmlMan Error" /></p>
<div style="break-before: page; page-break-before: always;"></div><h1 id="check-errors-in-xmlman"><a class="header" href="#check-errors-in-xmlman">Check Errors in XmlMan</a></h1>
<p>XmlMan performs several validation checks before compiling XML to Rhai.
If a check fails, you will receive a <strong>check error</strong> that helps identify the issue.</p>
<h2 id="what-a-check-error-looks-like"><a class="header" href="#what-a-check-error-looks-like">What a Check Error Looks Like</a></h2>
<p>A check error typically contains:</p>
<ol>
<li><strong>Error level</strong>: e.g., <code>[ERROR]</code></li>
<li><strong>Check error ID</strong>: e.g., <code>[CE01]</code></li>
<li><strong>Message</strong>: describes what went wrong</li>
</ol>
<h3 id="example"><a class="header" href="#example">Example</a></h3>
<pre><code class="language-log">[ERROR] [CE01] Enter not found in internal tree. A &lt;Root&gt; should exist in the xml markup.
</code></pre>
<p>Here’s what this means:</p>
<ul>
<li><code>[ERROR]</code>: Severity level</li>
<li><code>[CE01]</code>: Check error ID, which you can reference in the documentation</li>
<li>Message: Explains the missing <code>&lt;Root&gt;</code> element</li>
</ul>
<h2 id="all-check-errors"><a class="header" href="#all-check-errors">All check errors</a></h2>
<p>Are you curious to learn about all check errors in <strong>XmlMan</strong>, or just want to look up a check error?</p>
<p>Checkout the <a href="https://github.com/ewwii-sh/xmlman/blob/main/logs/CHECK_ERRORS.md">check error list</a>.</p>

                    </main>

                    <nav class="nav-wrapper" aria-label="Page navigation">
                        <!-- Mobile navigation buttons -->


                        <div style="clear: both"></div>
                    </nav>
                </div>
            </div>

            <nav class="nav-wide-wrapper" aria-label="Page navigation">

            </nav>

        </div>




        <script>
            window.playground_copyable = true;
        </script>


        <script src="elasticlunr.min.js"></script>
        <script src="mark.min.js"></script>
        <script src="searcher.js"></script>

        <script src="clipboard.min.js"></script>
        <script src="highlight.js"></script>
        <script src="book.js"></script>

        <!-- Custom JS scripts -->
        <script src="js/home_button.js"></script>

        <script>
        window.addEventListener('load', function() {
            window.setTimeout(window.print, 100);
        });
        </script>


    </div>
    </body>
</html>
